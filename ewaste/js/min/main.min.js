var startTime=void 0,preloader=void 0;$(window).load(function(){$("#preload-images").remove();var e=$("#preload");new Date-startTime>=500?(e.find("h1").text("Done!"),setTimeout(function(){e.addClass("gone"),setTimeout(function(){e.css("display","none"),$(".noscroll").each(function(){$(this).removeClass("noscroll")})},600)},1e3)):(clearTimeout(preloader),e.css("display","none"),$(".noscroll").each(function(){$(this).removeClass("noscroll")}))}),$(document).ready(function(){startTime=new Date,preloader=setTimeout(function(){$("#preload").css("background-color","#333")},500);var e=$(window),o=$.viewportH(),t=$.viewportW(),n=new ScrollMagic.Controller,a=window.matchMedia("only screen and (max-width: 480px)").matches;if(window.navigator.standalone)$("#statusbar").removeClass("hidden");else if(navigator.userAgent.match(/(ip(hone|od|ad))/i)&&document.cookie.indexOf("visited")<0){$("#statusbar").after('<div id="notification"><img src="images/webapp.png" ontouchstart=""/><div><h1>Did you know:</h1><p>You can tap "share" below and choose "Add to Home Screen" to view me as a web-app!</p></div><span>x</span></div>');var i=$("#notification");i.on("scroll touchmove",function(e){e.preventDefault()}),$("#start").on("touchstart",function(){i.addClass("gone"),$(this).off("touchstart")}),i.find("span").click(function(){i.addClass("gone");var e=new Date;e.setTime(e.getTime()+6048e5),document.cookie="visited=yes; expires="+e.toGMTString()})}var s=$("#slider"),r=$("#scroll-indicator"),c=$("#section1"),l=o>t&&o/2848||t/4288,d=new TimelineLite({paused:!0}).to(s,1,{css:{zoom:l},ease:Linear.easeNone,force3D:!0}).to($("#title"),.1,{css:{autoAlpha:"0"},ease:Linear.easeNone},0).to($("#start"),1,{css:{autoAlpha:"0",display:"none"}},0).to(r,.2,{css:{autoAlpha:"0",display:"none",bottom:"3rem"},ease:Linear.easeNone},0).to(s,.5,{autoAlpha:"0",ease:Linear.easeNone,force3D:!0}).set(s,{css:{display:"none"}});e.scroll(function(){var t=e.scrollTop()/o;t>=0&&(d.progress()<1||1.5>=t)&&TweenLite.to(d.pause(),.1,{time:t})}),r.find("a").click(function(){return $("html, body").animate({scrollTop:c.offset().top},2e3),setTimeout(function(){var e=$('<div class="scroll-down"><h1>Scroll down</h1><span class="fa fa-angle-down"></span></div>').insertAfter(r);e.width(),e.addClass("active"),setTimeout(function(){e.removeClass("active"),setTimeout(function(){e.remove()},500)},2e3)},2e3),!1});var u=function(){o=$.viewportH(),t=$.viewportW(),o>t&&$("#bg1").css("background-size","auto 100%"),l=o>t&&o/2848||t/4288,d.fromTo(s,1,{css:{zoom:1}},{css:{zoom:l},ease:Linear.easeNone,force3D:!0},0)};e.resize(u),u(),new ScrollMagic.Scene({offset:o,duration:3*o}).setTween((new TimelineLite).to($("#bg1"),1,{css:{top:"-18%"},ease:Linear.easeNone})).addTo(n);var p={discard:[["Monitors",595],["Computers",423],["Hard Drives",290],["Computer Peripherals",67],["Mobile Devices",19]],create:[["Computers",40],["Monitors",33],["Hard Drives",33],["Peripherals",10],["Mobile Devices",11]],countries:{names:["USA","EU Nations","China","India","Japan","Russia"],values:[10.3,10.9,8,3,3,1.6]}},f=void 0,m=void 0;new ScrollMagic.Scene({triggerElement:"#pin",triggerHook:"onCenter",duration:0}).on("enter",function(){f=f||new Highcharts.Chart({chart:{type:"pie",renderTo:"chart"},title:{text:"Waste",align:"center",verticalAlign:"middle"},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"k"},series:[{type:"pie",name:"Tons Discarded",innerSize:"30%",data:JSON.parse(JSON.stringify(p.discard))}]})}).addTo(n),new ScrollMagic.Scene({triggerElement:"#pin",triggerHook:"onLeave",duration:o}).setPin("#pin").addTo(n);var h=new ScrollMagic.Scene({triggerElement:"#section2",duration:0});a&&(new Highcharts.Chart({chart:{type:"bar",renderTo:"barchart"},title:{text:"E-Waste Production by Country"}}),h.offset(-o/2)),h.on("enter",function(){$.each(f.series[0].data,function(e,o){o.update(p.create[e],!1)}),f.series[0].tooltipOptions.valueSuffix="%",f.series[0].name="Percentage Recycled",f.redraw()}).on("leave",function(){$.each(f.series[0].data,function(e,o){o.update(p.discard[e],!1)}),f.series[0].tooltipOptions.valueSuffix="k",f.series[0].name="Tons Discarded",f.redraw()}).addTo(n),new ScrollMagic.Scene({triggerElement:"#section3",triggerHook:"onCenter",duration:0}).on("enter",function(){m=m||new Highcharts.Chart({chart:{type:"bar",renderTo:"barchart"},title:{text:"E-Waste Production by Country"},tooltip:{valueSuffix:" million tons"},xAxis:{categories:p.countries.names},yAxis:{min:0,title:{text:"Discards (Million Tons)",align:"high"}},plotOptions:{bar:{dataLabels:{enabled:!0}}},series:[{name:"Top Countries",data:p.countries.values}]})}).addTo(n),$("footer").click(function(){window.location.href="about.html"})});